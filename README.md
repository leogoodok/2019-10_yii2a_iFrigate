# Выполнение задания

Размещено:
Frontend - http://yii2aifrigate.wotskill/
Backend  - http://yii2aifrigate.wotskill/admin/

Ход выполнения см. в README_GitHub.md

## Структура приложения

### Commonчасть

#### Модели: ~\common\models\

~\common\models\User.php – модель пользователя
~\common\models\LoginForm.php – модель авторизации пользователей
~\common\models\db\TabMessage.php – модель таблицы БД

### Frontend часть

#### Web Доступная директория: ~\docs\

Входной скрипт: ~\docs\index.php
Подключаемые ресурсы: ~\docs\assets\
CSS файлы: ~\docs\admin\css\
JS файлы: ~\docs\admin\js\
Шрифты: ~\docs\fonts\

#### Контроллеры: ~\frontend\controllers\

~\frontend\controllers\SiteController.php – контроллер Site

#### Модели: ~\frontend\models\

~\frontend\models\ContactForm.php – модель отправки сообщения
~\frontend\models\SignupForm.php – модель регистрации пользователей

#### Представления: ~\frontend\views\

~\frontend\views\layouts\main.php – основной шаблон страниц
~\frontend\views\site\contact.php – отправить сообщение администратору
~\frontend\views\site\login.php – авторизация
~\frontend\views\site\signup.php – регистрация
~\frontend\views\site\error.php – вывода ошибок

### Backend часть

#### Web Доступная директория: ~\docs\admin\

Входной скрипт: ~\docs\admin\index.php
Подключаемые ресурсы: ~\docs\admin\assets\
CSS файлы: ~\docs\admin\admin\css\
JS файлы: ~\docs\admin\admin\js

#### Контроллеры: ~\ backend\controllers\

~\backend\controllers\SiteController.php – контроллер Site

#### Модели: ~\backend\models\

~\backend\models\MessageAction.php – модель изменения/удаления сообщений
~\backend\models\MessageForm.php – модель формирования списка сообщений

#### Представления: ~\backend\views\

~\backend\views\layouts\main.php – основной шаблон страниц
~\backend\views\site\message.php – сообщения администратору
~\backend\views\site\login.php – авторизация
~\backend\views\site\error.php – вывода ошибок


# Описание и инструкции

## Просмотр сообщений администратору

Все принятые сообщения отображаются в таблице с постраничным разделением.

Количество и содержание колонок таблицы изменяется в зависимости от "Разрешений" имеющихся у авторизовавшегося пользователя.
Например, Колонка статус сообщения может содержать или текст статуса или раскрывающийся список статусов, используемый для их изменения.

Изменение количества сообщений отображаемых на одной странице осуществляется кнопками в группе "Показывать по:".

Фильтрация отображаемых сообщений осуществляется группой кнопок "Фильтр по статусу:".
Примечание. При фильтре "Активное" отображаются все сообщения кроме имеющих статус "Удалено"

### Разрешения по просмотру, редактированию и удалению сообщений администратору.

1.	Удаление сообщений доступно только Главному Администратору.
2.	Редактирование статуса сообщения: Главному Администратору и Администратору.
3.	Просмотр сообщений любому авторизованному пользователю.

## Инструкции

### Инструкция пользователю по Регистрации.

Откройте любую страницу сайта.
В главном меню нажмите кнопку "Зарегистрироваться".
В странице регистрации заполните обязательные поля:
- Имя;
- Email;
- Пароль.
Нажмите кнопку "Зарегистрироваться".
Проверьте вашу электронную почту.
Вы получите сообщение от нашей сервисной службы.
В сообщении будет ссылка, по которой необходимо перейти для подтверждения регистрации.
После перехода по ссылке регистрация будет выполнена.

### Инструкция пользователю по Авторизации.

Откройте любую страницу сайта.
В главном меню нажмите кнопку "Войти".
В открывшейся странице заполните обязательные поля:
- Имя;
- Пароль.
Нажмите кнопку "Войти".

### Инструкция пользователю по отправке сообщения администратору.

Примечание. Отправить сообщение администратору может любой пользователь, не обязательно авторизованный.

Откройте любую страницу сайта.
В главном меню нажмите кнопку "Отправить сообщение".
В открывшейся странице авторизации заполните обязательные поля:
- Имя;
- Email;
- Тема сообщения;
- Содержание сообщения;
Вы можете прикрепить к сообщению до десяти файлов, размер файла не должен превышать 2 Мб.
Введите Код верификации.
Нажмите кнопку отправить сообщение

### Инструкция по просмотру принятых сообщений, изменению их статуса и удалению

Откройте любую страницу backend части сайта.
При необходимости авторизуйтесь.
Все принятые сообщения отображаются в таблице с постраничным разделением.
Изменение количества сообщений отображаемых на одной странице осуществляется кнопками в группе "Показывать по:".
Фильтрация отображаемых сообщений осуществляется группой кнопок "Фильтр по статусу:".
В зависимости от "разрешений" присвоенных пользователю возможно:
- просматривать сообщения;
- редактировать статусы сообщений;
- удалять сообщения.
Изменение статуса сообщения осуществляется выбором нового статуса в раскрывающемся списке колонки "Статус".
Примечание. Изменить статус сообщения "Удалено" нельзя!
Удаление сообщений выполняется кликом на кнопке "крестик" колонки "Удалить".

Внимание. Фиксация изменений статусов и удаления сообщений осуществляется нажатием кнопки "Сохранить изменения статусов сообщений и удалить выбранные сообщения".

#  Тестовое задание от "Интернет Фрегат".

Приложение должно быть с адаптацией под мобильные устройства.

Можете решить задачи несколькими способами, однако желательно чтобы любой из
результатов имел вид законченного продукта (имел "опрятный" внешний вид,
не содержал ошибок, имел структурированный и хорошо комментированный код и т.д.).
Приветствуется также небольшая сопроводительная документация (инструкция пользователя,
описание структуры программы, схемы, диаграммы и т.п.).
______________________________________________________________________________

1. Установить фреймворк CodeIgniter 3.x.x
2. Создать модуль обратной связи, включающий в себя администраторскую и пользовательскую части.
3. Пользовательская часть:
	- Форма отправки сообщений администратору с полями: имя, email, заголовок, текст сообщения, прикреплённый файл, каптча;
4. Администраторская часть:
	- форма входа для доступа к управлению сообщениями по логину/паролю;
	- постраничный список принятых сообщений в виде таблицы с колонками: дата отправки, имя, email, наличие прикреплённого файла, статус;
	- функция удаления сообщений из списка;
	- функция просмотра и изменения статуса сообщения (возможные статусы: новое, прочитано, принято);
5. Требования к реализации:
	- отправка сообщений должна происходить средствами jQuery AJAX;
	- пользовательские данные должны валидироваться средствами фреймворка и выводиться на форме отправки в случае наличия ошибок;
	- полученное сообщение пользователя необходимо сохранять в БД (MySQL), плюс, отправлять на email админа средствами фреймворка в формате HTML вместе с прикреплённым файлом;
	- аккуратное оформление интерфесов;
	- комментирование php-кода по стандарту php-doc.
